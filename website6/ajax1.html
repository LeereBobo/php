<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Ajax 1 - 请求纯文本数据</title>
</head>
<body>
	<button id="button">请求纯文本</button>

	<br>

	<div id="text">
		
	</div>

</body>

<script>
	// 监听button对象
	document.getElementById("button").addEventListener("click",loadText);

	// 实现loadText方法
	function loadText(){

		// Asynchronouse JavaScript And XML
		// 当下流行的数据请求方式：axios Fetch prototype NODE API jQuery
		// XMLHttpRequest

		// 1.实例化xhr对象
		var xhr = new XMLHttpRequest();
		// console.log(xhr);
		// console.log(xhr.readyState);//0
		
		// 2.配置对象信息:type url/file asyn(是否异步)
		xhr.open("GET","sample.txt",true);//false：数据请求完毕才可执行其他
		// console.log(xhr.readyState);//1

		// 3.执行处理数据的方法
		
		/*xhr.onload = function(){
			//console.log(this.responseText);
			//console.log(xhr.readyState);//4
			if (this.status == 200) {
				console.log(this.responseText);
			}
		}*/
		

		xhr.onprogress = function(){
			console.log("加载页面"+this.readyState);
		}	
		
		xhr.onreadystatechange = function(){
			// console.log(this.responseText);
			// console.log(xhr.readyState);//2 3 4
			if (this.readyState == 4 && this.status == 200) {
				// console.log(this.responseText);
				document.getElementById("text").innerHTML = this.responseText;
			}
		}
		

		// 4.发送请求
		xhr.send();

	}

	/*
	0: 请求未初始化
	1: 服务器连接已建立
	2: 请求已接收
	3: 请求处理中
	4: 请求已完成，且响应已就绪
	200:ok
	404:页面未找到
	*/
</script>
</html>